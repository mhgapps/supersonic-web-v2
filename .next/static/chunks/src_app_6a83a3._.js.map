{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/josuerodriguez/supersonic-web/src/app/ask-ali/ConversationOptionsDropdown.tsx"],"sourcesContent":["// src/app/ask-ali/ConversationOptionsDropdown.tsx\n\nimport React from 'react';\n\ninterface ConversationOptionsDropdownProps {\n  onEdit: () => void;\n  onDelete: () => void;\n}\n\nconst ConversationOptionsDropdown: React.FC<ConversationOptionsDropdownProps> = ({ onEdit, onDelete }) => {\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        top: '100%',\n        right: 0,\n        backgroundColor: 'var(--dropdown-bg)', // Ensure --dropdown-bg is defined in your globals.css\n        padding: 15,\n        border: '1px solid var(--secondary-background-color)',\n        borderRadius: 15,\n        boxShadow: '0 2px 6px rgba(0,0,0,0.15)',\n        zIndex: 10,\n      }}\n    >\n      <button\n        onClick={(e) => {\n          e.stopPropagation();\n          onEdit();\n        }}\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: 8,\n          padding: '4px 8px',\n          background: 'none',\n          border: 'none',\n          width: '100%',\n          cursor: 'pointer',\n          color: 'var(--foreground)',\n          fontSize: 12,\n        }}\n      >\n        <i className=\"fa-solid fa-pen\" style={{ fontSize: 12 }}></i> Rename\n      </button>\n      <button\n        onClick={(e) => {\n          e.stopPropagation();\n          onDelete();\n        }}\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: 8,\n          padding: '4px 8px',\n          background: 'none',\n          border: 'none',\n          width: '100%',\n          cursor: 'pointer',\n          color: 'var(--foreground)',\n          fontSize: 12,\n        }}\n      >\n        <i className=\"fa-solid fa-trash\" style={{ fontSize: 12 }}></i> Delete\n      </button>\n    </div>\n  );\n};\n\nexport default ConversationOptionsDropdown;"],"names":[],"mappings":"AAAA,kDAAkD;;;;;;AASlD,MAAM,8BAA0E,CAAC,EAAE,MAAM,EAAE,QAAQ,EAAE;IACnG,qBACE,6LAAC;QACC,OAAO;YACL,UAAU;YACV,KAAK;YACL,OAAO;YACP,iBAAiB;YACjB,SAAS;YACT,QAAQ;YACR,cAAc;YACd,WAAW;YACX,QAAQ;QACV;;0BAEA,6LAAC;gBACC,SAAS,CAAC;oBACR,EAAE,eAAe;oBACjB;gBACF;gBACA,OAAO;oBACL,SAAS;oBACT,YAAY;oBACZ,KAAK;oBACL,SAAS;oBACT,YAAY;oBACZ,QAAQ;oBACR,OAAO;oBACP,QAAQ;oBACR,OAAO;oBACP,UAAU;gBACZ;;kCAEA,6LAAC;wBAAE,WAAU;wBAAkB,OAAO;4BAAE,UAAU;wBAAG;;;;;;oBAAO;;;;;;;0BAE9D,6LAAC;gBACC,SAAS,CAAC;oBACR,EAAE,eAAe;oBACjB;gBACF;gBACA,OAAO;oBACL,SAAS;oBACT,YAAY;oBACZ,KAAK;oBACL,SAAS;oBACT,YAAY;oBACZ,QAAQ;oBACR,OAAO;oBACP,QAAQ;oBACR,OAAO;oBACP,UAAU;gBACZ;;kCAEA,6LAAC;wBAAE,WAAU;wBAAoB,OAAO;4BAAE,UAAU;wBAAG;;;;;;oBAAO;;;;;;;;;;;;;AAItE;KAzDM;uCA2DS"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///Users/josuerodriguez/supersonic-web/src/app/ask-ali/RenamePopup.tsx"],"sourcesContent":["// src/app/ask-ali/RenamePopup.tsx\n\nimport React, { useState, useEffect, useRef } from 'react';\n\ninterface RenamePopupProps {\n  initialTitle: string;\n  onSave: (newTitle: string) => void;\n  onCancel: () => void;\n  // Optional: You can pass position offsets if desired.\n  topOffset?: number;\n  leftOffset?: number;\n}\n\nconst RenamePopup: React.FC<RenamePopupProps> = ({\n  initialTitle,\n  onSave,\n  onCancel,\n  topOffset = 100,   // Adjust this value as needed to position the popup vertically\n  leftOffset = 50,   // Adjust this value as needed to position the popup horizontally\n}) => {\n  const [newTitle, setNewTitle] = useState(initialTitle);\n  const popupRef = useRef<HTMLDivElement>(null);\n\n  // Optionally, focus the textarea when the popup opens.\n  useEffect(() => {\n    popupRef.current?.querySelector('textarea')?.focus();\n  }, []);\n\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        top: topOffset,\n        left: leftOffset,\n        backgroundColor: 'var(--background)',\n        padding: '16px',\n        border: '1px solid var(--secondary-background-color)',\n        borderRadius: '8px',\n        boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n        zIndex: 1000,\n      }}\n      ref={popupRef}\n    >\n      <h3 style={{ margin: '0 0 12px 0', fontSize: 16 }}>Rename Conversation</h3>\n      <textarea\n        value={newTitle}\n        onChange={(e) => setNewTitle(e.target.value)}\n        rows={2}\n        style={{\n          width: '100%',\n          padding: '8px',\n          borderRadius: '4px',\n          border: '1px solid #ccc',\n          fontSize: 14,\n          resize: 'vertical',\n          color: 'var(--foreground)',\n          backgroundColor: 'var(--input-bg)',\n        }}\n      />\n      <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '8px', marginTop: '12px' }}>\n        <button\n          onClick={onCancel}\n          style={{\n            padding: '8px 12px',\n            border: 'none',\n            borderRadius: '4px',\n            backgroundColor: '#ccc',\n            color: '#000',\n            cursor: 'pointer',\n            fontSize: 14,\n          }}\n        >\n          Cancel\n        </button>\n        <button\n          onClick={() => onSave(newTitle)}\n          style={{\n            padding: '8px 12px',\n            border: 'none',\n            borderRadius: '4px',\n            backgroundColor: 'var(--primary-color)',\n            color: 'var(--background)',\n            cursor: 'pointer',\n            fontSize: 14,\n          }}\n        >\n          Save\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default RenamePopup;"],"names":[],"mappings":"AAAA,kCAAkC;;;;;AAElC;;;;AAWA,MAAM,cAA0C,CAAC,EAC/C,YAAY,EACZ,MAAM,EACN,QAAQ,EACR,YAAY,GAAG,EACf,aAAa,EAAE,EAChB;;IACC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,WAAW,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAkB;IAExC,uDAAuD;IACvD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,SAAS,OAAO,EAAE,cAAc,aAAa;QAC/C;gCAAG,EAAE;IAEL,qBACE,6LAAC;QACC,OAAO;YACL,UAAU;YACV,KAAK;YACL,MAAM;YACN,iBAAiB;YACjB,SAAS;YACT,QAAQ;YACR,cAAc;YACd,WAAW;YACX,QAAQ;QACV;QACA,KAAK;;0BAEL,6LAAC;gBAAG,OAAO;oBAAE,QAAQ;oBAAc,UAAU;gBAAG;0BAAG;;;;;;0BACnD,6LAAC;gBACC,OAAO;gBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gBAC3C,MAAM;gBACN,OAAO;oBACL,OAAO;oBACP,SAAS;oBACT,cAAc;oBACd,QAAQ;oBACR,UAAU;oBACV,QAAQ;oBACR,OAAO;oBACP,iBAAiB;gBACnB;;;;;;0BAEF,6LAAC;gBAAI,OAAO;oBAAE,SAAS;oBAAQ,gBAAgB;oBAAY,KAAK;oBAAO,WAAW;gBAAO;;kCACvF,6LAAC;wBACC,SAAS;wBACT,OAAO;4BACL,SAAS;4BACT,QAAQ;4BACR,cAAc;4BACd,iBAAiB;4BACjB,OAAO;4BACP,QAAQ;4BACR,UAAU;wBACZ;kCACD;;;;;;kCAGD,6LAAC;wBACC,SAAS,IAAM,OAAO;wBACtB,OAAO;4BACL,SAAS;4BACT,QAAQ;4BACR,cAAc;4BACd,iBAAiB;4BACjB,OAAO;4BACP,QAAQ;4BACR,UAAU;wBACZ;kCACD;;;;;;;;;;;;;;;;;;AAMT;GA9EM;KAAA;uCAgFS"}},
    {"offset": {"line": 243, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 249, "column": 0}, "map": {"version":3,"sources":["file:///Users/josuerodriguez/supersonic-web/src/app/ask-ali/ConversationHistory.tsx"],"sourcesContent":["// src/app/ask-ali/ConversationHistory.tsx\n\nimport React, { ChangeEvent, KeyboardEvent, useState, useEffect, useRef } from 'react';\nimport ConversationOptionsDropdown from './ConversationOptionsDropdown';\nimport RenamePopup from './RenamePopup';\n\nexport interface Conversation {\n  conversationId: string;\n  title: string;\n  createdAt?: string; // Optional: timestamp from the backend\n}\n\nexport interface ConversationHistoryProps {\n  conversationList: Conversation[];\n  editingConversationId: string | null;\n  editingTitle: string;\n  onSelect: (conv: Conversation) => void;\n  onEditingStart: (conv: Conversation) => void;\n  onRename: (convId: string, newTitle: string) => void;\n  onRenameKeyDown: (e: KeyboardEvent<HTMLInputElement>, convId: string) => void;\n  onTitleChange: (newTitle: string) => void;\n  onDelete: (convId: string) => void;\n}\n\nconst ConversationHistory: React.FC<ConversationHistoryProps> = ({\n  conversationList,\n  editingConversationId,\n  editingTitle,\n  onSelect,\n  onEditingStart,\n  onRename,\n  onRenameKeyDown,\n  onTitleChange,\n  onDelete,\n}) => {\n  // State to control the dropdown for options.\n  const [openDropdownFor, setOpenDropdownFor] = useState<string | null>(null);\n  // State to control the rename popup and store which conversation is being renamed.\n  const [renamePopupOpen, setRenamePopupOpen] = useState<boolean>(false);\n  const [conversationToRename, setConversationToRename] = useState<Conversation | null>(null);\n  // Ref for the dropdown container.\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  // State for filtering conversations.\n  const [searchTerm, setSearchTerm] = useState<string>(\"\");\n  // State to control the visibility of the search popup.\n  const [searchPopupOpen, setSearchPopupOpen] = useState<boolean>(false);\n  // State to control how many conversations are visible.\n  const [visibleCount, setVisibleCount] = useState<number>(10);\n\n  // When the search term changes, reset the visible count to 10.\n  useEffect(() => {\n    setVisibleCount(10);\n  }, [searchTerm]);\n\n  // Close the dropdown when clicking outside.\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (openDropdownFor && dropdownRef.current && !dropdownRef.current.contains(e.target as Node)) {\n        setOpenDropdownFor(null);\n      }\n    };\n    document.addEventListener('click', handleClickOutside);\n    return () => document.removeEventListener('click', handleClickOutside);\n  }, [openDropdownFor]);\n\n  const toggleDropdown = (convId: string) => {\n    setOpenDropdownFor(prev => (prev === convId ? null : convId));\n  };\n\n  const handleRenameClick = (conv: Conversation) => {\n    setConversationToRename(conv);\n    setRenamePopupOpen(true);\n    setOpenDropdownFor(null);\n  };\n\n  // Sort the conversation list by createdAt (newest first) if available.\n  const sortedConversations = [...conversationList].sort((a, b) => {\n    const dateA = a.createdAt ? new Date(a.createdAt).getTime() : 0;\n    const dateB = b.createdAt ? new Date(b.createdAt).getTime() : 0;\n    return dateB - dateA;\n  });\n\n  // Filter the sorted list based on the search term.\n  const filteredConversations = sortedConversations.filter(conv =>\n    conv.title.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  // Limit the displayed conversations to visibleCount.\n  const visibleConversations = filteredConversations.slice(0, visibleCount);\n\n  return (\n    <div style={{ padding: 16, color: 'var(--foreground)', height: '100%', overflowY: 'auto', position: 'relative' }}>\n      {/* Vertical Navigation Menu */}\n      <div style={{ marginBottom: 16 }}>\n        <nav style={{ display: 'flex', flexDirection: 'column', gap: 8, fontSize: 14 }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: 8, cursor: 'pointer' }}>\n            <i className=\"fa-solid fa-triangle-exclamation\"></i>\n            <span>Incidents</span>\n          </div>\n          <div style={{ display: 'flex', alignItems: 'center', gap: 8, cursor: 'pointer' }}>\n            <i className=\"fa-solid fa-chart-line\"></i>\n            <span>Reports</span>\n          </div>\n          <div style={{ display: 'flex', alignItems: 'center', gap: 8, cursor: 'pointer' }}>\n            <i className=\"fa-solid fa-gear\"></i>\n            <span>Settings</span>\n          </div>\n        </nav>\n      </div>\n\n      {/* Header Row: Incident Chats with New Conversation and Search buttons */}\n      <div style={{ marginBottom: 16, display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n        <h3 style={{ margin: 0, fontSize: 16 }}>Incident Chats</h3>\n        <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              // When New Conversation is clicked, pass an empty conversation to the parent.\n              onSelect({ conversationId: \"\", title: \"\" });\n            }}\n            style={{\n              background: 'none',\n              border: 'none',\n              cursor: 'pointer',\n              fontSize: 18,\n              color: 'var(--foreground)'\n            }}\n            title=\"New Conversation\"\n          >\n            <i className=\"fa-solid fa-plus\"></i>\n          </button>\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              setSearchPopupOpen(!searchPopupOpen);\n            }}\n            style={{\n              background: 'none',\n              border: 'none',\n              cursor: 'pointer',\n              fontSize: 18,\n              color: 'var(--foreground)'\n            }}\n            title=\"Search Chats\"\n          >\n            <i className=\"fa-solid fa-magnifying-glass\"></i>\n          </button>\n          {searchTerm && (\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                setSearchTerm(\"\");\n              }}\n              style={{\n                background: 'none',\n                border: 'none',\n                cursor: 'pointer',\n                fontSize: 18,\n                color: 'var(--foreground)'\n              }}\n              title=\"Reset Search\"\n            >\n              <i className=\"fa-solid fa-rotate-left\"></i>\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Inline Search Popup: rendered as part of the normal flow so it pushes down the conversation list */}\n      {searchPopupOpen && (\n        <div\n          style={{\n            marginBottom: 16,\n            padding: 8,\n            border: '1px solid var(--secondary-background-color)',\n            borderRadius: 4,\n            backgroundColor: 'var(--background)',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 4,\n          }}\n        >\n          <input\n            type=\"text\"\n            placeholder=\"Search chats...\"\n            value={searchTerm}\n            onChange={(e: ChangeEvent<HTMLInputElement>) => setSearchTerm(e.target.value)}\n            style={{\n              padding: '4px 8px',\n              borderRadius: 4,\n              border: '1px solid var(--secondary-background-color)',\n              fontSize: 14,\n              backgroundColor: 'var(--background)',\n              color: 'var(--foreground)',\n              flex: 1,\n            }}\n          />\n          <button\n            onClick={() => setSearchPopupOpen(false)}\n            style={{\n              background: 'none',\n              border: 'none',\n              cursor: 'pointer',\n              fontSize: 18,\n              color: 'var(--foreground)',\n            }}\n            title=\"Close Search\"\n          >\n            <i className=\"fa-solid fa-xmark\"></i>\n          </button>\n        </div>\n      )}\n\n      {/* Conversation List */}\n      <div>\n        {visibleConversations.length > 0 ? (\n          visibleConversations.map(conv => (\n            <div\n              key={conv.conversationId}\n              style={{\n                padding: 8,\n                cursor: 'pointer',\n                color: 'var(--foreground)',\n                borderBottom: '1px solid var(--secondary-background-color)',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between',\n                position: 'relative',\n              }}\n              onClick={() => onSelect(conv)}\n            >\n              {/* Conversation Title (allow up to 2 lines) */}\n              <span\n                style={{\n                  fontSize: 14,\n                  flex: 1,\n                  display: '-webkit-box',\n                  WebkitLineClamp: 2,\n                  WebkitBoxOrient: 'vertical',\n                  overflow: 'hidden',\n                }}\n              >\n                {conv.title.replace(/\"/g, '')}\n              </span>\n              {/* Options Button */}\n              <div\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  minWidth: 40,\n                  justifyContent: 'center',\n                }}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  toggleDropdown(conv.conversationId);\n                }}\n                ref={dropdownRef}\n              >\n                <button\n                  style={{\n                    background: 'none',\n                    border: 'none',\n                    cursor: 'pointer',\n                    padding: 6,\n                    color: 'var(--foreground)',\n                  }}\n                  title=\"Options\"\n                >\n                  <i className=\"fa-solid fa-ellipsis-h\"></i>\n                </button>\n                {openDropdownFor === conv.conversationId && (\n                  <ConversationOptionsDropdown\n                    onEdit={() => handleRenameClick(conv)}\n                    onDelete={() => {\n                      if (window.confirm(\"Are you sure you want to delete this conversation?\")) {\n                        onDelete(conv.conversationId);\n                        setOpenDropdownFor(null);\n                      }\n                    }}\n                  />\n                )}\n              </div>\n            </div>\n          ))\n        ) : (\n          <p>No chats found.</p>\n        )}\n      </div>\n\n      {/* Load More Button */}\n      {filteredConversations.length > visibleCount && (\n        <div style={{ textAlign: 'center', marginTop: 16 }}>\n          <button\n            onClick={() => setVisibleCount(visibleCount + 20)}\n            style={{\n              background: 'none',\n              border: '1px solid var(--secondary-background-color)',\n              borderRadius: 4,\n              padding: '4px 8px',\n              cursor: 'pointer',\n              fontSize: 14,\n              color: 'var(--foreground)'\n            }}\n          >\n            Load More\n          </button>\n        </div>\n      )}\n\n      {renamePopupOpen && conversationToRename && (\n        <RenamePopup\n          initialTitle={conversationToRename.title}\n          onSave={(newTitle: string) => {\n            onRename(conversationToRename.conversationId, newTitle);\n            setRenamePopupOpen(false);\n            setConversationToRename(null);\n          }}\n          onCancel={() => {\n            setRenamePopupOpen(false);\n            setConversationToRename(null);\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ConversationHistory;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 772, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 778, "column": 0}, "map": {"version":3,"sources":["file:///Users/josuerodriguez/supersonic-web/src/app/ask-ali/MessageInput.tsx"],"sourcesContent":["// src/app/ask-ali/MessageInput.tsx\n\nimport React, { useRef, useEffect, ChangeEvent } from 'react';\n\ninterface MessageInputProps {\n  messageText: string;\n  setMessageText: (text: string) => void;\n  isProcessing: boolean;\n  onSend: () => void;\n  stop: () => void;\n}\n\nconst MessageInput: React.FC<MessageInputProps> = ({\n  messageText,\n  setMessageText,\n  isProcessing,\n  onSend,\n  stop,\n}) => {\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  // Auto-resize effect whenever messageText changes.\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;\n    }\n  }, [messageText]);\n\n  return (\n    <div style={{ width: '100%', maxWidth: 800, padding: 16, margin: '0 auto' }}>\n      <div\n        style={{\n          backgroundColor: 'var(--input-bg)',\n          borderRadius: 12,\n          padding: 12,\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 8,\n        }}\n      >\n        <textarea\n          ref={textareaRef}\n          value={messageText}\n          onChange={(e: ChangeEvent<HTMLTextAreaElement>) => setMessageText(e.target.value)}\n          placeholder=\"Ask ALI anything...\"\n          style={{\n            width: '100%',\n            minHeight: 40,\n            maxHeight: 288,\n            border: 'none',\n            resize: 'vertical',\n            outline: 'none',\n            backgroundColor: 'transparent',\n            color: 'var(--input-text-color)',\n            fontSize: 16,\n            lineHeight: '1.5',\n          }}\n        />\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n          <div style={{ display: 'flex', gap: 16 }}>\n            <button\n              onClick={() => { console.log(\"Attachment clicked\"); alert('Attachment placeholder'); }}\n              style={{\n                background: 'none',\n                border: 'none',\n                cursor: 'pointer',\n              }}\n            >\n              <i className=\"fa-solid fa-paperclip\" style={{ fontSize: 16, color: \"var(--icon-color)\" }}></i>\n            </button>\n            <button\n              onClick={() => { console.log(\"Camera clicked\"); alert('Camera placeholder'); }}\n              style={{\n                background: 'none',\n                border: 'none',\n                cursor: 'pointer',\n              }}\n            >\n              <i className=\"fa-solid fa-camera\" style={{ fontSize: 16, color: \"var(--icon-color)\" }}></i>\n            </button>\n          </div>\n          <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n            <button\n              onClick={() => { console.log(\"Microphone clicked\"); alert('Audio recording placeholder'); }}\n              style={{\n                background: 'none',\n                border: 'none',\n                cursor: 'pointer',\n              }}\n            >\n              <i className=\"fa-solid fa-microphone\" style={{ fontSize: 16, color: \"var(--icon-color)\" }}></i>\n            </button>\n            <button\n              onClick={isProcessing ? stop : onSend}\n              style={{\n                width: 40,\n                height: 40,\n                borderRadius: '50%',\n                backgroundColor: '#000',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                cursor: 'pointer',\n                border: 'none',\n              }}\n            >\n              <i\n                className={isProcessing ? \"fa-solid fa-stop\" : \"fa-solid fa-arrow-up\"}\n                style={{ color: '#fff', fontSize: 16 }}\n              ></i>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MessageInput;"],"names":[],"mappings":"AAAA,mCAAmC;;;;;AAEnC;;;;AAUA,MAAM,eAA4C,CAAC,EACjD,WAAW,EACX,cAAc,EACd,YAAY,EACZ,MAAM,EACN,IAAI,EACL;;IACC,MAAM,cAAc,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAuB;IAEhD,mDAAmD;IACnD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,IAAI,YAAY,OAAO,EAAE;gBACvB,YAAY,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG;gBACnC,YAAY,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,YAAY,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC;YAC5E;QACF;iCAAG;QAAC;KAAY;IAEhB,qBACE,6LAAC;QAAI,OAAO;YAAE,OAAO;YAAQ,UAAU;YAAK,SAAS;YAAI,QAAQ;QAAS;kBACxE,cAAA,6LAAC;YACC,OAAO;gBACL,iBAAiB;gBACjB,cAAc;gBACd,SAAS;gBACT,SAAS;gBACT,eAAe;gBACf,KAAK;YACP;;8BAEA,6LAAC;oBACC,KAAK;oBACL,OAAO;oBACP,UAAU,CAAC,IAAwC,eAAe,EAAE,MAAM,CAAC,KAAK;oBAChF,aAAY;oBACZ,OAAO;wBACL,OAAO;wBACP,WAAW;wBACX,WAAW;wBACX,QAAQ;wBACR,QAAQ;wBACR,SAAS;wBACT,iBAAiB;wBACjB,OAAO;wBACP,UAAU;wBACV,YAAY;oBACd;;;;;;8BAEF,6LAAC;oBAAI,OAAO;wBAAE,SAAS;wBAAQ,gBAAgB;wBAAiB,YAAY;oBAAS;;sCACnF,6LAAC;4BAAI,OAAO;gCAAE,SAAS;gCAAQ,KAAK;4BAAG;;8CACrC,6LAAC;oCACC,SAAS;wCAAQ,QAAQ,GAAG,CAAC;wCAAuB,MAAM;oCAA2B;oCACrF,OAAO;wCACL,YAAY;wCACZ,QAAQ;wCACR,QAAQ;oCACV;8CAEA,cAAA,6LAAC;wCAAE,WAAU;wCAAwB,OAAO;4CAAE,UAAU;4CAAI,OAAO;wCAAoB;;;;;;;;;;;8CAEzF,6LAAC;oCACC,SAAS;wCAAQ,QAAQ,GAAG,CAAC;wCAAmB,MAAM;oCAAuB;oCAC7E,OAAO;wCACL,YAAY;wCACZ,QAAQ;wCACR,QAAQ;oCACV;8CAEA,cAAA,6LAAC;wCAAE,WAAU;wCAAqB,OAAO;4CAAE,UAAU;4CAAI,OAAO;wCAAoB;;;;;;;;;;;;;;;;;sCAGxF,6LAAC;4BAAI,OAAO;gCAAE,SAAS;gCAAQ,YAAY;gCAAU,KAAK;4BAAE;;8CAC1D,6LAAC;oCACC,SAAS;wCAAQ,QAAQ,GAAG,CAAC;wCAAuB,MAAM;oCAAgC;oCAC1F,OAAO;wCACL,YAAY;wCACZ,QAAQ;wCACR,QAAQ;oCACV;8CAEA,cAAA,6LAAC;wCAAE,WAAU;wCAAyB,OAAO;4CAAE,UAAU;4CAAI,OAAO;wCAAoB;;;;;;;;;;;8CAE1F,6LAAC;oCACC,SAAS,eAAe,OAAO;oCAC/B,OAAO;wCACL,OAAO;wCACP,QAAQ;wCACR,cAAc;wCACd,iBAAiB;wCACjB,SAAS;wCACT,YAAY;wCACZ,gBAAgB;wCAChB,QAAQ;wCACR,QAAQ;oCACV;8CAEA,cAAA,6LAAC;wCACC,WAAW,eAAe,qBAAqB;wCAC/C,OAAO;4CAAE,OAAO;4CAAQ,UAAU;wCAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQrD;GAzGM;KAAA;uCA2GS"}},
    {"offset": {"line": 1005, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1011, "column": 0}, "map": {"version":3,"sources":["file:///Users/josuerodriguez/supersonic-web/src/app/ask-ali/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useRef, ChangeEvent, KeyboardEvent } from 'react';\nimport Head from 'next/head';\nimport ReactMarkdown from 'react-markdown';\nimport ConversationHistory, { Conversation } from './ConversationHistory';\nimport MessageInput from './MessageInput';\n\ninterface Message {\n  role: 'user' | 'ali';\n  text: string;\n  options?: string[];\n}\n\ninterface OptionButtonsProps {\n  options: string[];\n  onSelected: (option: string) => void;\n}\n\n// Reusable Option Buttons\nconst OptionButtons: React.FC<OptionButtonsProps> = ({ options, onSelected }) => {\n  return (\n    <div style={{ marginTop: 8 }}>\n      {options.map((opt, index) => (\n        <button\n          key={index}\n          onClick={() => onSelected(opt)}\n          style={{\n            marginRight: 8,\n            padding: '6px 12px',\n            borderRadius: '20px',\n            border: '1px solid #ccc',\n            backgroundColor: 'transparent',\n            cursor: 'pointer'\n          }}\n        >\n          {opt}\n        </button>\n      ))}\n    </div>\n  );\n};\n\nconst conversationApiUrl = \"https://sem28c4rii.execute-api.us-east-1.amazonaws.com\";\n\n// Helpers\nfunction trimTrailingAsterisks(text: string) {\n  return text.replace(/\\*+$/, \"\").trim();\n}\nfunction convertRelativeDates(text: string) {\n  const now = new Date();\n  if (text.toLowerCase().includes(\"yesterday\")) {\n    const yesterday = new Date();\n    yesterday.setDate(now.getDate() - 1);\n    const formatted = yesterday.toLocaleDateString(\"en-US\", { month: \"long\", day: \"2-digit\", year: \"numeric\" });\n    text = text.replace(/yesterday/gi, formatted);\n  }\n  if (text.toLowerCase().includes(\"last friday\")) {\n    const dayOfWeek = now.getDay();\n    const daysToSubtract = dayOfWeek >= 5 ? dayOfWeek - 5 : dayOfWeek + 2;\n    const lastFriday = new Date();\n    lastFriday.setDate(now.getDate() - daysToSubtract);\n    const formatted = lastFriday.toLocaleDateString(\"en-US\", { month: \"long\", day: \"2-digit\", year: \"numeric\" });\n    text = text.replace(/last friday/gi, formatted);\n  }\n  return text;\n}\nfunction processAliResponse(response: string): { text: string; options: string[] } {\n  let processed = response.replace(\"Thank you for providing the time.\", \"\").trim();\n  processed = convertRelativeDates(processed);\n  if (processed.includes(\"OPTIONS:\")) {\n    const parts = processed.split(\"OPTIONS:\");\n    const mainMessage = parts[0].trim();\n    const optionsPart = parts[1].trim();\n    const options = optionsPart.split(\"|\").map(opt => opt.trim());\n    return { text: trimTrailingAsterisks(mainMessage), options };\n  }\n  return { text: trimTrailingAsterisks(processed), options: [] };\n}\n\nconst AskAli: React.FC = () => {\n  // Dark mode check\n  const [darkMode, setDarkMode] = useState(false);\n\n  // Conversation tracking\n  const [conversationId, setConversationId] = useState<string>(() => {\n    if (typeof window !== 'undefined') {\n      const stored = localStorage.getItem('conversationId');\n      return stored || \"\";\n    }\n    return \"\";\n  });\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [messageText, setMessageText] = useState<string>('');\n  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n\n  // Conversation list\n  const [conversationList, setConversationList] = useState<Conversation[]>([]);\n  const [editingConversationId, setEditingConversationId] = useState<string | null>(null);\n  const [editingTitle, setEditingTitle] = useState<string>(\"\");\n\n  // Refs\n  const chatEndRef = useRef<HTMLDivElement>(null);\n  const abortControllerRef = useRef<AbortController | null>(null);\n\n  // Load dark mode\n  useEffect(() => {\n    setDarkMode(window.matchMedia('(prefers-color-scheme: dark)').matches);\n  }, []);\n\n  // Scroll to bottom\n  useEffect(() => {\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // Fetch conversation list on mount\n  useEffect(() => {\n    fetchConversations();\n  }, []);\n\n  // ---------------------\n  // API: Fetch conversation list\n  // ---------------------\n  const fetchConversations = async () => {\n    try {\n      const res = await fetch(`${conversationApiUrl}/conversations?tenantId=tenant-1&userId=user-guest`);\n      if (res.ok) {\n        const data = await res.json();\n        if (Array.isArray(data) && data.length > 0) setConversationList(data);\n      }\n    } catch {}\n  };\n\n  // ---------------------\n  // API: Fetch messages for selected conversation\n  // ---------------------\n  const fetchMessagesForConversation = async (convId: string) => {\n    try {\n      const url = `${conversationApiUrl}/messages?conversationId=${encodeURIComponent(convId)}&tenantId=tenant-1&userId=user-guest`;\n      const res = await fetch(url, { method: 'GET' });\n      if (res.ok) {\n        const data = await res.json();\n        const fetchedMessages = Array.isArray(data) ? data : data.messages || [];\n        const converted = fetchedMessages.map((item: any) => ({\n          role: item.role === 'assistant' ? 'ali' : item.role,\n          text: item.content || \"\",\n          options: item.options || []\n        }));\n        setMessages(converted);\n      } else if (res.status === 404) {\n        setMessages([]);\n      }\n    } catch {}\n  };\n\n  // ---------------------\n  // Conversation selection\n  // ---------------------\n  const handleConversationSelect = (conv: Conversation) => {\n    setConversationId(conv.conversationId);\n    localStorage.setItem('conversationId', conv.conversationId);\n    setMessages([]);\n    if (conv.conversationId.trim()) fetchMessagesForConversation(conv.conversationId);\n  };\n\n  // ---------------------\n  // Send user message\n  // ---------------------\n  const sendMessage = async (text: string) => {\n    if (!text.trim() || isProcessing) return;\n    const abortController = new AbortController();\n    abortControllerRef.current = abortController;\n    const signal = abortController.signal;\n\n    // Show user message locally\n    setMessages(prev => [...prev, { role: 'user', text }]);\n    setIsProcessing(true);\n\n    try {\n      const res = await fetch(`${conversationApiUrl}/messages`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        signal,\n        body: JSON.stringify({\n          conversationId: conversationId || undefined,\n          text,\n          tenantId: \"tenant-1\",\n          userId: \"user-guest\"\n        }),\n      });\n      if (res.ok) {\n        const data = await res.json();\n        if (data.conversationId && data.conversationId !== conversationId) {\n          setConversationId(data.conversationId);\n          localStorage.setItem('conversationId', data.conversationId);\n          await fetchConversations();\n        }\n        const parsed = processAliResponse(data.reply || \"\");\n        setMessages(prev => [...prev, { role: 'ali', text: parsed.text, options: parsed.options }]);\n      }\n    } catch {}\n\n    setIsProcessing(false);\n    setMessageText('');\n  };\n\n  // ---------------------\n  // Stop the current AI request\n  // ---------------------\n  const stop = () => {\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n      setIsProcessing(false);\n    }\n  };\n\n  // ---------------------\n  // UI Handlers\n  // ---------------------\n  const handleSend = () => {\n    sendMessage(messageText);\n  };\n  const handleOptionClick = (option: string) => {\n    sendMessage(option);\n  };\n\n  // ---------------------\n  // Conversation History Edits\n  // ---------------------\n  const handleEditingStart = (conv: Conversation) => {\n    setEditingConversationId(conv.conversationId);\n    setEditingTitle(conv.title);\n  };\n  const handleRenameKeyDown = (e: KeyboardEvent<HTMLInputElement>, convId: string) => {\n    if (e.key === 'Enter') {\n      renameConversation(convId, editingTitle);\n      setEditingConversationId(null);\n    }\n  };\n  const renameConversation = async (convId: string, newTitle: string) => {\n    try {\n      await fetch(`${conversationApiUrl}/conversations/${convId}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          title: newTitle,\n          tenantId: \"tenant-1\",\n          userId: \"user-guest\",\n        }),\n      });\n      fetchConversations();\n    } catch {}\n  };\n  const handleDeleteConversation = async (convId: string) => {\n    try {\n      await fetch(`${conversationApiUrl}/conversations/${convId}`, {\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          tenantId: \"tenant-1\",\n          userId: \"user-guest\",\n        }),\n      });\n      fetchConversations();\n    } catch {}\n  };\n\n  // ---------------------\n  // Category Buttons (first conversation prompt)\n  // ---------------------\n  const handleCategorySelection = (category: string) => {\n    if (category === \"Employee Discipline\") {\n      sendMessage(\"I need to start a new employee discipline incident.\");\n    } else if (category === \"Harassment/Discrimination\") {\n      sendMessage(\"I need to start a new harassment or discrimination incident.\");\n    } else {\n      sendMessage(\"I need some general HR consultation.\");\n    }\n  };\n\n  // UI styling\n  const buttonStyle: React.CSSProperties = {\n    padding: '8px 16px',\n    borderRadius: '20px',\n    border: '1px solid #ccc',\n    backgroundColor: 'transparent',\n    cursor: 'pointer',\n    color: darkMode ? '#fff' : '#171717'\n  };\n\n  return (\n    <>\n      <Head>\n        <title>Ask ALI</title>\n        <link\n          rel=\"stylesheet\"\n          href=\"https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css\"\n        />\n      </Head>\n\n      <div style={{ display: 'flex', height: '100vh', backgroundColor: 'var(--background)' }}>\n        {/* Left Pane: Conversation List */}\n        <div style={{ width: 250, backgroundColor: 'var(--secondary-background-color)', overflowY: 'auto' }}>\n          <ConversationHistory\n            conversationList={conversationList}\n            editingConversationId={editingConversationId}\n            editingTitle={editingTitle}\n            onSelect={handleConversationSelect}\n            onEditingStart={handleEditingStart}\n            onRename={renameConversation}\n            onRenameKeyDown={handleRenameKeyDown}\n            onTitleChange={setEditingTitle}\n            onDelete={handleDeleteConversation}\n          />\n        </div>\n\n        {/* Right Pane: Chat + Input */}\n        <div style={{ flex: 1, display: 'flex', flexDirection: 'column', backgroundColor: 'var(--right-pane-bg)' }}>\n          {/* Chat display */}\n          <div style={{ flex: 1, display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', overflowY: 'auto', padding: 16 }}>\n            <div style={{ maxWidth: 800, width: '100%' }}>\n              {/* If no messages, show category buttons */}\n              {messages.length === 0 && (\n                <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', textAlign: 'center', marginBottom: 24 }}>\n                  <h2 style={{ fontSize: '1.5rem', marginBottom: 16 }}>What can I help with?</h2>\n                  <div style={{ display: 'inline-flex', gap: '1rem' }}>\n                    <button onClick={() => handleCategorySelection(\"Employee Discipline\")} style={buttonStyle}>\n                      <i className=\"fa-solid fa-user-shield\" style={{ marginRight: 8 }} />\n                      Employee Discipline\n                    </button>\n                    <button onClick={() => handleCategorySelection(\"Harassment/Discrimination\")} style={buttonStyle}>\n                      <i className=\"fa-solid fa-user\" style={{ marginRight: 8 }} />\n                      Harassment/Discrimination\n                    </button>\n                    <button onClick={() => handleCategorySelection(\"General HR Consultation\")} style={buttonStyle}>\n                      <i className=\"fa-solid fa-comments\" style={{ marginRight: 8 }} />\n                      General HR Consultation\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Messages */}\n              {messages.map((msg, index) => (\n                <div key={index} style={{ marginBottom: 12, textAlign: msg.role === 'user' ? 'right' : 'left' }}>\n                  <div\n                    style={{\n                      display: 'inline-block',\n                      padding: 12,\n                      borderRadius: 8,\n                      backgroundColor: msg.role === 'user'\n                        ? (darkMode ? \"#333\" : \"#f0f0f0\")\n                        : \"transparent\",\n                      color: darkMode ? \"#fff\" : \"#171717\"\n                    }}\n                  >\n                    <ReactMarkdown>{msg.text}</ReactMarkdown>\n                  </div>\n                  {msg.options && msg.options.length > 0 && (\n                    <OptionButtons options={msg.options} onSelected={handleOptionClick} />\n                  )}\n                </div>\n              ))}\n              <div ref={chatEndRef} />\n            </div>\n          </div>\n\n          {/* Message Input */}\n          <MessageInput\n            messageText={messageText}\n            setMessageText={setMessageText}\n            isProcessing={isProcessing}\n            onSend={handleSend}\n            stop={stop}\n          />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default AskAli;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1607, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}